<div class="controls">
  <timer [gamestatus]="status"></timer>
  <points [gamestatus]="status"
    [points]="points" [total]="total"></points>
  <ti-button
    *ngIf="status=='playing'"
    [routerLink]="'/activitat'"
    [type]="'icon size-m vermell'"
  >X</ti-button>
</div>

<ti-dialog
  *ngIf="status=='preload'"
  title="MEMORY"
>
  <div class="content">
    <div class="preload" *ngIf="preloadReady==false">
      <span [style.width.%]="(lstep/ltotal)*100"></span>
    </div>
    <p *ngIf="preloadReady==true">
      Joc a punt!
    </p>
  </div>
  <div class="buttons" *ngIf="preloadReady==true">
    <ti-button (click)="startGame($event)" [type]="'icon size-l blau'">
      <svg xmlns="http://www.w3.org/2000/svg" width="21" height="24" viewBox="0 0 21 24"><path d="M21 12l-18 12v-24z"/></svg>
    </ti-button>
  </div>
</ti-dialog>

<div
  *ngIf="status=='playing'"
  [ngSwitch]="gameType"
>
  <memory-board
    *ngSwitchCase="'memory'"
    [cards]="cards"
    (onWin)="onWin($event)"
    (onFail)="onFail($event)"
    (onFinish)="onFinish($event)"
  ></memory-board>
  <sequencing-board
    *ngSwitchCase="'sequencing'"
    [words]="cards"
    (onWin)="onWin($event)"
    (onFail)="onFail($event)"
    (onFinish)="onFinish($event)"
  ></sequencing-board>
  <relaciona-game
    *ngSwitchCase="'relaciona'"
    [words]="cards"
    (onWin)="onWin($event)"
    (onFail)="onFail($event)"
    (onFinish)="onFinish($event)"
  ></relaciona-game>
  <mixed-game
    *ngSwitchCase="'mixed'"
    [words]="cards"
    (onWin)="onWin($event)"
    (onFail)="onFail($event)"
    (onFinish)="onFinish($event)"
  ></mixed-game>
</div>


<ti-dialog
  *ngIf="status=='end'"
  title="MEMORY"
>
  <div class="content">
    <p>
      Felicitats has guanyat!!!!
    </p>
  </div>
  <div class="buttons">
    <ti-button (click)="startGame($event)" [type]="'icon size-l blau'">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M13.5 2c-5.629 0-10.212 4.436-10.475 10h-3.025l4.537 5.917 4.463-5.917h-2.975c.26-3.902 3.508-7 7.475-7 4.136 0 7.5 3.364 7.5 7.5s-3.364 7.5-7.5 7.5c-2.381 0-4.502-1.119-5.876-2.854l-1.847 2.449c1.919 2.088 4.664 3.405 7.723 3.405 5.798 0 10.5-4.702 10.5-10.5s-4.702-10.5-10.5-10.5z"/></svg>
    </ti-button>
    <ti-button [routerLink]="'/activitat'" [type]="'icon size-l blau'">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M21 13v10h-6v-6h-6v6h-6v-10h-3l12-12 12 12h-3zm-1-5.907v-5.093h-3v2.093l3 3z"/></svg>
    </ti-button>
  </div>
</ti-dialog>
<balloons
  *ngIf="status=='end'"
  [amount]="40"
  [delay]="3500"
></balloons>
